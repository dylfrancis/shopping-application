import { Center } from '@chakra-ui/react';
import Head from 'next/head';
import { StaffProductCard } from '~/components/StaffProductCard';

import { api } from '~/utils/api';

export default function Home() {
  const ctx = api.useUtils();
  const { data } = api.product.getAll.useQuery();
  const { mutate } = api.product.delete.useMutation({
    onSuccess: () => {
      void ctx.product.getAll.invalidate();
    }
  });

  return (
    <>
      <Head>
        <title>Shopping Application ðŸ›’</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <Center>
          {data?.map((data) => (
            <StaffProductCard
              product={data}
              key={data.product_id}
              onDelete={() => {
                mutate({ id: data.product_id });
              }}
            />
          ))}
        </Center>
      </main>
    </>
  );
}
